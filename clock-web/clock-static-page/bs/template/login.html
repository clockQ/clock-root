<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
  <script type="text/javascript" src="../static/module/jquery/jquery-1.11.1.min.js"></script>
  <script type="text/javascript" src="../static/module/bootstrap-3.3.5/js/bootstrap.min.js"></script>
  <!--引入css-->
  <link href="../static/css/loginstyle.css" rel="stylesheet">
  <link href="../static/css/commonstyle.css" rel="stylesheet">
  <link href="../static/module/bootstrap-3.3.5/css/bootstrap.min.css" rel="stylesheet">
  <link href="../static/css/plugins/toastr/toastr.min.css" rel="stylesheet">

  <title>登录</title>
</head>
<!--预加载JS库-->
<script type="text/javascript" src="../static/module/i18next-1.11.2.min.js"></script>
<script type="text/javascript">
//初始化i18n
$(document).ready(function(){
  $.i18n.init({
      lng : 'zh-CN',
      resGetPath : 'locales/__lng__/__ns__.json'
  },function(err, t){
      $('[data-i18n]').i18n(); // 通过选择器集体翻译
  })
});
</script>  
<body>

<!--欢迎语-->
<h1 data-i18n="login.welcome"></h1>

<!--登录表单-->
<div class="login-form">
  <!-- 头像显示,首次登录为默认头像 -->
  <div class="avtar">
    <img id="avtar" src="../static/img/avtar.png" />
  </div>
  <!-- 登录输入表单 -->
  <form>
    <input type="text" id="email" class="text" value="email" data-i18n="[value]login.email" onfocus="this.value = '';" 
          onblur="if (this.value == '') {this.value = $.t('login.emailHint');}" >
    <input type="password" id="password" value="password" data-i18n="[value]login.password" onfocus="this.value = '';" 
          onblur="if (this.value == '') {this.value = $.t('login.passwordHint');}">
  </form>
  <!-- 登录按钮 -->
  <div class="signin">
    <input type="submit" id="loginBtn" value="login"  data-i18n="[value]login.login" >
  </div>
</div>

<!-- 等待遮罩层 -->
<div id="loginLoading" style="display:none">
  <div class="zhezhao"></div> 
  <div class="loading">
    <table data-i18n="login.loginLoading"></table>
  </div>  
</div>

</body>
</html>

<!--不需要预加载的js库,提高页面打开速度-->
<script type="text/javascript" src="../static/js/page/login.js"></script>
<!-- 弹框插件 -->
<script type="text/javascript" src="../static/js/plugins/toastr/toastr.min.js"></script>
<!--当前页面的js片段-->
<script type="text/javascript">
toastr.options.positionClass = 'toast-top-center';
// 登录提交
$(document).on('click','#loginBtn',function(){
  var email = $("#email");  
  var password = $("#password"); 
  var msg = "";
  if ($.trim(email.val()) == "") {
    msg = "用户名不能为空！";
    email.focus();
  } else if (!/^([a-zA-Z0-9_-])+@([a-zA-Z0-9_-])+(.[a-zA-Z0-9_-])+/ .test($.trim(email.val()))) {
    msg = "邮箱格式不正确！";
    email.focus();
  } else if ($.trim(password.val()) == "") {
    msg = "密码不能为空！";
    password.focus();
  } else if (!/^\w{6,20}$/.test($.trim(password.val()))) {
    msg = "密码格式不正确！";
    password.focus();
  }
  if(msg != ""){
    toastr.warning(msg);
    return false;
  }
  //调用login.js中的通用登录
  login(email.val(),password.val());
});

// 为document绑定onkeydown事件监听是否按了回车键  
$(document).keydown(function(event){  
  if (event.keyCode === 13){ // 按了回车键  
    $("#loginBtn").trigger("click");  
  }  
});  
</script>



